{% assign titleTag = tag | default: "h2" %}
{% assign itemTags = tags | default: categories %}

<article class="card post on-list">
{% if title %}
  <{{ titleTag }} class="post-title">
{% if link %}<a href="{{ link }}">{% endif %}
    {{ title }}
    {% if link %}</a>{% endif %}
  </{{ titleTag }}>
{% endif %}

{% if date or itemTags %}
  <div class="post-meta">
            {% if date %}
              <time class="post-date" datetime="{{ date | date: '%Y-%m-%d' }}">
                    {{ date | date: '%Y-%m-%d' }}
                </time>
            {% endif %}

    {% if date and itemTags %}&nbsp;·&nbsp;{% endif %}

    {% if itemTags %}
      <span class="post-tags">
                    {% if itemTags.first %}
                      {% assign tagsList = itemTags %}
                    {% else %}
                      {% assign tagsList = itemTags | split: "," %}
                    {% endif %}
        {% assign developmentTagSlug = "разработка" | tagSlug %}
        {% assign nonDevelopmentTagSlug = "не разработка" | tagSlug %}
        {% assign developmentTags = "" | split: "" %}
        {% assign nonDevelopmentTags = "" | split: "" %}
        {% assign otherTags = "" | split: "" %}
        {% for itemTag in tagsList %}
          {% assign tagTrimmed = itemTag | strip %}
          {% assign tagSlug = tagTrimmed | tagSlug %}
          {% if tagSlug == developmentTagSlug %}
            {% assign developmentTags = developmentTags | push: tagTrimmed %}
          {% elsif tagSlug == nonDevelopmentTagSlug %}
            {% assign nonDevelopmentTags = nonDevelopmentTags | push: tagTrimmed %}
          {% else %}
            {% assign otherTags = otherTags | push: tagTrimmed %}
          {% endif %}
        {% endfor %}
        {% assign orderedTags = "" | split: "" %}
        {% for priorityTag in developmentTags %}
          {% assign orderedTags = orderedTags | push: priorityTag %}
        {% endfor %}
        {% for priorityTag in nonDevelopmentTags %}
          {% assign orderedTags = orderedTags | push: priorityTag %}
        {% endfor %}
        {% for normalTag in otherTags %}
          {% assign orderedTags = orderedTags | push: normalTag %}
        {% endfor %}
        {% for itemTag in orderedTags %}
          {% assign tagTrimmed = itemTag | strip %}
          {% assign tagSlug = tagTrimmed | tagSlug %}
          {% assign tagUrl = "/tag/" | append: tagSlug | append: "/" %}
          {% assign tagLabel = tagTrimmed | tagLabel %}
          <a href="{{ tagUrl }}">{{ tagLabel }}</a>{% unless forloop.last %}, {% endunless %}
        {% endfor %}
                </span>
    {% endif %}
        </div>
{% endif %}

{% assign cardImagePath = imagePath | default: image %}
{% if cardImagePath %}
  <div class="post-cover">
            {% if link %}<a href="{{ link }}">{% endif %}
                {% assign cardImageAlt = imageAlt | default: title %}
                {% mediaImage cardImagePath, cardImageAlt %}
                {% if link %}</a>{% endif %}
        </div>
{% endif %}

{% if description %}
  <div class="post-content">
            <p>{{ description }}</p>
        </div>
{% endif %}

{% if link %}
  <div>
            <a class="read-more button inline" href="{{ link }}">[Read more]</a>
        </div>
{% endif %}
</article>
